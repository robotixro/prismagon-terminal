<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Prismagon Internal Network</title>
  <style>
    body {
      background-color: #000;
      color: #33FF33;
      font-family: 'Courier New', Courier, monospace;
      margin: 0;
      overflow: hidden;
    }

    .terminal {
      max-width: 600px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
      padding: 20px;
    }

    input, button {
      background: none;
      border: 1px solid #33FF33;
      color: #33FF33;
      font-family: inherit;
      padding: 5px;
      margin-top: 10px;
      width: 100%;
      box-sizing: border-box;
      caret-color: transparent;
      position: relative;
    }

    input::selection {
      background-color: #33FF33;
      color: #000;
    }

    input::after {
      content: "";
      display: inline-block;
      width: 10px;
      height: 20px;
      background: #33FF33;
      position: absolute;
      animation: blink 1s step-end infinite;
    }

    @keyframes blink {
      from, to { opacity: 0; }
      50% { opacity: 1; }
    }

    button:hover {
      background-color: #003300;
      cursor: pointer;
      box-shadow: 0 0 10px #33FF33;
    }

    .logo {
      font-weight: bold;
      font-size: 18px;
      margin-bottom: 20px;
    }

    #introLogo {
      width: 300px;
      margin: 20vh auto 0;
      display: none;
      position: relative;
      z-index: 1;
    }

    .crt-overlay::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background-image: repeating-linear-gradient(
        to bottom,
        rgba(0, 255, 0, 0.05),
        rgba(0, 255, 0, 0.05) 1px,
        transparent 1px,
        transparent 2px
      );
      z-index: 2;
    }

    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-thumb {
      background-color: #33FF33;
    }

    ::-webkit-scrollbar-track {
      background-color: #000;
    }

    #mainTerminal {
      display: none;
    }

    #commandSection {
      display: none;
      flex-direction: column;
      max-width: 600px;
      margin: 0 auto;
      height: 100vh;
    }

    #commandInput {
      width: 100%;
      margin-bottom: 10px;
    }

    #logOutput, #videoOutput {
      flex-grow: 1;
      overflow-y: auto;
      border: 1px solid #33FF33;
      padding: 10px;
      text-align: left;
      display: none;
      position: relative;
      background-color: #000;
    }

    #logOutput hr {
      border: none;
      border-top: 1px solid #33FF33;
      margin: 5px 0;
    }

    .closeBtn {
      position: absolute;
      right: 10px;
      top: 5px;
      cursor: pointer;
      color: #33FF33;
    }

    .closeBtn:hover {
      color: red;
    }

    video {
      width: 100%;
      border: 1px solid #33FF33;
      margin-top: 20px;
    }

    #pressKey {
      color: #33FF33;
      text-align: center;
      font-size: 20px;
      margin-top: 40vh;
    }
  </style>
</head>
<body class="crt-overlay">

  <div id="pressKey">Press any key or tap to continue...</div>

  <audio id="introAudio">
    <source src="Intro.m4a" type="audio/mp4" />
    Your browser does not support the audio element.
  </audio>

  <img id="introLogo" src="prismagon-logo.png" alt="Prismagon Logo">

  <div id="mainTerminal">
    <div class="terminal">
      <div class="logo">[PRISMAGON INC. SECURE LOGIN]</div>
      <div class="output" id="output"></div>
      <input type="text" id="username" placeholder="Username">
      <input type="password" id="password" placeholder="Password">
      <button onclick="login()">LOGIN</button>
      <div class="output" id="response"></div>
    </div>
  </div>

  <div id="commandSection">
    <input type="text" id="commandInput" placeholder="Enter command..." onkeydown="if(event.key==='Enter'){handleCommand()}">
    <div id="logOutput">
      <span class="closeBtn" onclick="closeLogs()">[X]</span>
    </div>
    <div id="videoOutput">
      <span class="closeBtn" onclick="closeVideo()">[X]</span>
      <video id="securityCamVideo" controls>
        <source src="securitycam1.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
    </div>
  </div>

  <script>
    const pressKey = document.getElementById("pressKey");
    const audio = document.getElementById("introAudio");
    const logo = document.getElementById("introLogo");
    const terminal = document.getElementById("mainTerminal");

    function glitchFlicker(count = 0) {
      if (count >= 15) {
        logo.style.display = "none";
        terminal.style.display = "block";
        startTyping();
        return;
      }
      logo.style.opacity = Math.random() < 0.4 ? "0.1" : "1";
      setTimeout(() => glitchFlicker(count + 1), 100 + Math.random() * 150);
    }

    function startTyping() {
      const lines = [
        "Welcome to the Prismagon Internal Network.",
        "Please enter your credentials to continue."
      ];
      const output = document.getElementById("output");
      let lineIndex = 0;
      let charIndex = 0;

      function typeLine() {
        if (lineIndex < lines.length) {
          if (charIndex < lines[lineIndex].length) {
            output.innerHTML += lines[lineIndex].charAt(charIndex);
            charIndex++;
            setTimeout(typeLine, 60 + Math.random() * 50);
          } else {
            output.innerHTML += "<br>";
            lineIndex++;
            charIndex = 0;
            setTimeout(typeLine, 600);
          }
        }
      }

      typeLine();
    }

    function login() {
      const username = document.getElementById('username').value.trim().toLowerCase();
      const password = document.getElementById('password').value.trim();
      const response = document.getElementById('response');

      if (username === "melanie.burton@prismagoninc.com" && password === "K12WhyAmISecret") {
        response.innerHTML = "<br>Access Granted. Welcome back, Agent Burton.<br>Loading command interface...";
        setTimeout(() => {
          response.innerHTML = "";
          document.getElementById("mainTerminal").style.display = "none";
          document.getElementById("commandSection").style.display = "flex";
        }, 5000);
      } else {
        response.innerHTML = "<br>ACCESS DENIED. INCIDENT LOGGED.";
        setTimeout(() => {
          response.innerHTML = "";
        }, 5000);
      }
    }

    function handleCommand() {
      const input = document.getElementById("commandInput");
      const command = input.value.trim().toLowerCase();
      input.value = "";

      if (command === "textlogs") {
        showLogs();
      } else if (command === "camlogs") {
        showCamVideo();
      } else if (command === "signout") {
        document.getElementById("commandSection").style.display = "none";
        document.getElementById("mainTerminal").style.display = "block";
      } else if (command === "help") {
        showHelp();
      }
    }

    function showHelp() {
      const logOutput = document.getElementById("logOutput");
      const videoOutput = document.getElementById("videoOutput");
      videoOutput.style.display = "none";
      logOutput.innerHTML = '<span class="closeBtn" onclick="closeLogs()">[X]</span>';
      logOutput.style.display = "block";
      const helpLines = [
        "[HELP] Available commands:",
        "- textlogs: View internal terminal message logs.",
        "- camlogs: View security camera footage.",
        "- signout: Log out of the command terminal.",
        "- help: Display this help message."
      ];
      helpLines.forEach(line => {
        const div = document.createElement("div");
        div.textContent = line;
        logOutput.appendChild(div);
      });
    }

    function showLogs() {
      const logOutput = document.getElementById("logOutput");
      const videoOutput = document.getElementById("videoOutput");
      videoOutput.style.display = "none";
      logOutput.innerHTML = '<span class="closeBtn" onclick="closeLogs()">[X]</span>Loading archived messages<span id="dots">.</span>';
      logOutput.style.display = "block";

      let dotCount = 1;
      const dotsEl = document.getElementById("dots");
      const dotInterval = setInterval(() => {
        dotCount = (dotCount % 3) + 1;
        dotsEl.textContent = ".".repeat(dotCount);
      }, 500);

      setTimeout(() => {
        clearInterval(dotInterval);
        logOutput.innerHTML = '<span class="closeBtn" onclick="closeLogs()">[X]</span>';
        const lore = [
          "[SYSTEM]: Initializing internal network...",
          "[ADMIN]: Welcome, Agent Burton.",
          "[AGENT.LOCKE]: Why did the automated turret YOU were working on start malfunctioning...",
          "[AGENT.BURTON]: It passed the test... then started shooting.",
          "[AGENT.LOCKE]: HOW DID THAT HAPPEN",
          "[AGENT.BURTON]: It did it on its own.",
          "[AGENT.BURTON]: Itâ€™s being controlled by voidwell.",
          "[AGENT.LOCKE]: ...",
          "[SYSTEM]: Terminal shutdown..."
        ];
        let index = 0;
        function nextLine() {
          if (index < lore.length) {
            const line = document.createElement("div");
            line.textContent = lore[index];
            logOutput.appendChild(line);
            const hr = document.createElement("hr");
            logOutput.appendChild(hr);
            logOutput.scrollTop = logOutput.scrollHeight;
            index++;
            setTimeout(nextLine, 200);
          }
        }
        nextLine();
      }, 5000);
    }

    function closeLogs() {
      document.getElementById("logOutput").style.display = "none";
    }

    function showCamVideo() {
      document.getElementById("logOutput").style.display = "none";
      const videoContainer = document.getElementById("videoOutput");
      videoContainer.style.display = "block";
      const video = document.getElementById("securityCamVideo");
      video.currentTime = 0;
      video.play();
    }

    function closeVideo() {
      const video = document.getElementById("securityCamVideo");
      video.pause();
      document.getElementById("videoOutput").style.display = "none";
    }

    function startIntro() {
      if (window.introStarted) return;
      window.introStarted = true;
      pressKey.style.display = "none";
      audio.volume = 1;
      audio.play();
      setTimeout(() => {
        logo.style.display = "block";
        glitchFlicker();
      }, 1000);
    }

    window.addEventListener("keydown", startIntro);
    window.addEventListener("click", startIntro);

    // Attempt fullscreen on load
    document.addEventListener("DOMContentLoaded", () => {
      const requestFullScreen = () => {
        const elem = document.documentElement;
        if (elem.requestFullscreen) {
          elem.requestFullscreen();
        } else if (elem.mozRequestFullScreen) {
          elem.mozRequestFullScreen();
        } else if (elem.webkitRequestFullscreen) {
          elem.webkitRequestFullscreen();
        } else if (elem.msRequestFullscreen) {
          elem.msRequestFullscreen();
        }
      };
      setTimeout(requestFullScreen, 300);
    });
  </script>
</body>
</html>

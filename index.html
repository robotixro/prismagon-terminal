<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Prismagon Internal Network</title>
  <style>
    body {
      background-color: #000;
      color: #33FF33;
      font-family: 'Courier New', Courier, monospace;
      margin: 0;
      padding: 20px;
      overflow: hidden;
    }

    .terminal, #commandSection {
      max-width: 600px;
      margin: 0 auto;
      display: none;
    }

    .logo {
      font-size: 24px;
      text-align: center;
      margin-top: 30vh;
      font-weight: bold;
    }

    .output {
      margin-top: 20px;
      min-height: 60px;
    }

    input, button {
      background: none;
      border: 1px solid #33FF33;
      color: #33FF33;
      font-family: inherit;
      padding: 5px;
      margin-top: 10px;
      width: 100%;
      box-sizing: border-box;
    }

    button:hover {
      background-color: #003300;
      cursor: pointer;
    }

    .crt-overlay::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background-image: repeating-linear-gradient(
        to bottom,
        rgba(0, 255, 0, 0.05),
        rgba(0, 255, 0, 0.05) 1px,
        transparent 1px,
        transparent 2px
      );
      z-index: 2;
    }

    #pressKey {
      text-align: center;
      margin-top: 40vh;
    }

    #logOutput, #videoOutput {
      flex-grow: 1;
      overflow-y: auto;
      white-space: pre-wrap;
    }

    .glitch {
      animation: glitchAnim 0.2s infinite;
    }

    @keyframes glitchAnim {
      0% { opacity: 1; }
      50% { opacity: 0; }
      100% { opacity: 1; }
    }
  </style>
</head>
<body class="crt-overlay">

  <div id="pressKey">[Press any key to continue]</div>

  <div class="logo" id="introLogo" style="display:none;">
    > PRISMAGON INC
  </div>

  <div class="terminal" id="commandSection">
    <input type="text" id="commandInput" placeholder="Enter command..." autofocus />
    <div id="logOutput"></div>
    <div id="videoOutput" style="display: none;"></div>
  </div>

  <audio id="introAudio" src="Intro.m4a" preload="auto"></audio>

  <script>
    const pressKeyDiv = document.getElementById("pressKey");
    const introLogo = document.getElementById("introLogo");
    const commandSection = document.getElementById("commandSection");
    const audio = document.getElementById("introAudio");

    let glitchInterval;

    function glitchLogo() {
      glitchInterval = setInterval(() => {
        introLogo.style.visibility = Math.random() < 0.5 ? "hidden" : "visible";
      }, 100);
    }

    function stopGlitching() {
      clearInterval(glitchInterval);
      introLogo.style.visibility = "visible";
    }

    function startSequence() {
      pressKeyDiv.style.display = "none";
      introLogo.style.display = "block";
      audio.volume = 1;
      audio.play();

      glitchLogo();

      setTimeout(() => {
        stopGlitching();
        introLogo.style.display = "none";
        commandSection.style.display = "block";
        document.getElementById("commandInput").focus();
      }, 5000);
    }

    window.addEventListener("keydown", () => {
      if (pressKeyDiv.style.display !== "none") {
        startSequence();
      }
    });

    document.getElementById("commandInput").addEventListener("keydown", function(e) {
      if (e.key === "Enter") {
        const command = this.value.trim().toLowerCase();
        this.value = "";
        if (command === "textlogs") {
          showLogs();
        } else {
          document.getElementById("logOutput").innerText = "Unknown command.";
        }
      }
    });

    function showLogs() {
      const logOutput = document.getElementById("logOutput");
      const videoOutput = document.getElementById("videoOutput");
      videoOutput.style.display = "none";
      logOutput.innerHTML = 'Loading archived messages<span id="dots">.</span>';
      logOutput.style.display = "block";

      let dotCount = 1;
      const dotsEl = document.getElementById("dots");
      const dotInterval = setInterval(() => {
        dotCount = (dotCount % 3) + 1;
        dotsEl.textContent = ".".repeat(dotCount);
      }, 500);

      setTimeout(() => {
        clearInterval(dotInterval);
        logOutput.innerHTML = "";

        const loreEntries = [
          "[SYSTEM]: Initializing internal network...",
          "[ADMIN]: Welcome, Agent Burton.",
          "[AGENT.LOCKE]: Why did the automated turret YOU were working on start malfunctioning and shooting OUR agent team?",
          "[AGENT.BURTON]: I finished all the wiring, and tested it using the set images. It passed the test, then I stood in front of it and it didn't shoot. So I went back out of its view",
          "[AGENT.BURTON]: then Agent Parker came in, and then the turret seemed normal. He was just looking around but then just started shooting at him.",
          "[AGENT.LOCKE]: Then it turned to you and charged the laser before it overheated just before killing you.",
          "[AGENT.BURTON]: Yes",
          "[AGENT.LOCKE]: So tell me,",
          "[AGENT.LOCKE]: HOW DID THAT HAPPEN",
          "[AGENT.BURTON]: I did everything correctly.",
          "[AGENT.BURTON]: It just did it on its own.",
          "[AGENT.LOCKE]: It just did it on its own? So you're saying it's alive now?",
          "[AGENT.BURTON]: No. I'm just saying",
          "[AGENT.BURTON]: it did it on its own.",
          "[AGENT.BURTON]: Plus, there is unnecessary Artificial Intelligence in the hardware.",
          "[AGENT.LOCKE]: Well it's probably just for finding targets and knowing who is from Prismagon not to shoot.",
          "[AGENT.BURTON]: I managed to get some of the hardware onto a USB stick, which I then plugged into my PC.",
          "[AGENT.LOCKE]: OK?",
          "[AGENT.BURTON]: It is sending data to an outside source",
          "[AGENT.BURTON]: and receiving data, instructions, code,",
          "[AGENT.BURTON]: the turret is being controlled by voidwell.",
          "[AGENT.LOCKE]: What?",
          "[AGENT.BURTON]: The turret is even sending the camera data to voidwell, they are looking through the turrets. And of course, because the turret uses identification to see if it should shoot or not,",
          "[AGENT.BURTON]: it also has the names and other information of all the agents the turret camera has seen.",
          "[AGENT.LOCKE]: Okay well",
          "[SYSTEM]: Terminal shutdown..."
        ];

        let i = 0;
        const interval = setInterval(() => {
          if (i < loreEntries.length) {
            logOutput.innerHTML += loreEntries[i++] + "\n";
            logOutput.scrollTop = logOutput.scrollHeight;
          } else {
            clearInterval(interval);
          }
        }, 1000);
      }, 5000);
    }
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Prismagon Internal Network</title>
  <style>
    body {
      background-color: #000;
      color: #33FF33;
      font-family: 'Courier New', Courier, monospace;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    .terminal, #commandSection {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }

    input, button {
      background: none;
      border: 1px solid #33FF33;
      color: #33FF33;
      font-family: inherit;
      padding: 5px;
      margin-top: 10px;
      width: 100%;
      box-sizing: border-box;
    }

    button:hover {
      background-color: #003300;
      cursor: pointer;
    }

    .logo {
      font-weight: bold;
      font-size: 18px;
      margin-bottom: 20px;
    }

    #introLogo {
      width: 300px;
      display: block;
      margin: 20vh auto 0;
      opacity: 1;
    }

    .crt-overlay::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background-image: repeating-linear-gradient(
        to bottom,
        rgba(0, 255, 0, 0.05),
        rgba(0, 255, 0, 0.05) 1px,
        transparent 1px,
        transparent 2px
      );
      z-index: 2;
    }

    #mainTerminal {
      display: none;
    }

    #pressAnyKey {
      text-align: center;
      margin-top: 40vh;
      font-size: 18px;
    }

    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-thumb {
      background-color: #33FF33;
    }

    ::-webkit-scrollbar-track {
      background-color: #000;
    }

    #commandSection {
      display: none;
      flex-direction: column;
      height: 100vh;
    }

    #logOutput {
      flex-grow: 1;
      overflow-y: auto;
      background-color: #000;
      color: #33FF33;
      border: 1px solid #33FF33;
      padding: 10px;
      display: none;
      position: relative;
    }

    #logOutput hr {
      border: none;
      border-top: 1px solid #33FF33;
      margin: 5px 0;
    }

    .closeBtn {
      position: absolute;
      right: 10px;
      top: 5px;
      cursor: pointer;
      color: #33FF33;
    }

    .closeBtn:hover {
      color: red;
    }

    video {
      width: 100%;
      border: 1px solid #33FF33;
      margin-top: 20px;
    }
  </style>
</head>
<body class="crt-overlay">

  <audio id="introAudio">
    <source src="Intro.m4a" type="audio/mp4">
    Your browser does not support the audio element.
  </audio>

  <div id="pressAnyKey">Press any key or tap to continue...</div>
  <img id="introLogo" src="prismagon-logo.png" style="display: none;" alt="Prismagon Logo">

  <!-- LOGIN TERMINAL -->
  <div id="mainTerminal">
    <div class="terminal">
      <div class="logo">[PRISMAGON INC. SECURE LOGIN]</div>
      <div class="output" id="output"></div>
      <input type="text" id="username" placeholder="Username">
      <input type="password" id="password" placeholder="Password">
      <button onclick="login()">LOGIN</button>
      <div class="output" id="response"></div>
    </div>
  </div>

  <!-- COMMAND TERMINAL -->
  <div id="commandSection">
    <input type="text" id="commandInput" placeholder="Enter command..." onkeydown="if(event.key==='Enter'){handleCommand()}">
    <div id="logOutput">
      <span class="closeBtn" onclick="closeLogs()">[X]</span>
    </div>
    <div id="videoOutput" style="display: none;">
      <span class="closeBtn" onclick="closeVideo()">[X]</span>
      <video id="securityCamVideo" controls>
        <source src="securitycam1.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>
  </div>

  <script>
    const introLogo = document.getElementById("introLogo");
    const pressAnyKey = document.getElementById("pressAnyKey");
    const introAudio = document.getElementById("introAudio");

    function startIntro() {
      pressAnyKey.style.display = "none";
      introLogo.style.display = "block";
      introAudio.volume = 1;
      introAudio.play().catch(() => {
        console.log("Audio playback blocked.");
      });

      let flickerCount = 0;
      function glitchFlicker() {
        if (flickerCount >= 10 + Math.floor(Math.random() * 10)) {
          introLogo.style.display = "none";
          document.getElementById("mainTerminal").style.display = "block";
          startTyping();
          return;
        }
        introLogo.style.opacity = Math.random() < 0.5 ? "0.1" : "1";
        flickerCount++;
        setTimeout(glitchFlicker, 100 + Math.random() * 150);
      }
      glitchFlicker();
    }

    function startTyping() {
      const lines = [
        "Welcome to the Prismagon Internal Network.",
        "Please enter your credentials to continue."
      ];
      const output = document.getElementById("output");
      let lineIndex = 0;
      let charIndex = 0;

      function typeLine() {
        if (lineIndex < lines.length) {
          if (charIndex < lines[lineIndex].length) {
            output.innerHTML += lines[lineIndex].charAt(charIndex);
            charIndex++;
            setTimeout(typeLine, 60 + Math.random() * 50);
          } else {
            output.innerHTML += "<br>";
            lineIndex++;
            charIndex = 0;
            setTimeout(typeLine, 600);
          }
        }
      }
      typeLine();
    }

    document.addEventListener("keydown", startIntro, { once: true });
    document.addEventListener("click", startIntro, { once: true });

    function login() {
      const username = document.getElementById('username').value.trim().toLowerCase();
      const password = document.getElementById('password').value.trim();
      const response = document.getElementById('response');

      if (username === "melanie.burton@prismagoninc.com" && password === "K12WhyAmISecret") {
        response.innerHTML = "<br>Access Granted. Welcome back, Agent Burton.<br>Loading command interface...";
        setTimeout(() => {
          document.getElementById("mainTerminal").style.display = "none";
          document.getElementById("commandSection").style.display = "flex";
        }, 2000);
      } else {
        response.innerHTML = "<br>ACCESS DENIED. INCIDENT LOGGED.";
      }
    }

    function handleCommand() {
      const input = document.getElementById("commandInput");
      const command = input.value.trim().toLowerCase();
      input.value = "";

      if (command === "textlogs") {
        showLogs();
      } else if (command === "camlogs") {
        showCamVideo();
      }
    }

    function showLogs() {
      const logOutput = document.getElementById("logOutput");
      const videoOutput = document.getElementById("videoOutput");
      videoOutput.style.display = "none";
      logOutput.innerHTML = '<span class="closeBtn" onclick="closeLogs()">[X]</span>Loading archived messages<span id="dots">.</span>';
      logOutput.style.display = "block";

      let dotCount = 1;
      const dotsEl = document.getElementById("dots");
      const dotInterval = setInterval(() => {
        dotCount = (dotCount % 3) + 1;
        dotsEl.textContent = ".".repeat(dotCount);
      }, 500);

      setTimeout(() => {
        clearInterval(dotInterval);
        logOutput.innerHTML = '<span class="closeBtn" onclick="closeLogs()">[X]</span>';
        const loreEntries = [
          "[SYSTEM]: Initializing internal network...",
          "[ADMIN]: Welcome, Agent Burton.",
          "[AGENT.LOCKE]: Why did the automated turret YOU were working on start malfunctioning and shooting OUR agent team?",
          "[AGENT.BURTON]: I finished all the wiring, and tested it using the set images. It passed the test, then I stood in front of it and it didn't shoot. So I went back out of its view",
          "[AGENT.BURTON]: then Agent Parker came in, and then the turret seemed normal. He was just looking around but then just started shooting at him.",
          "[AGENT.LOCKE]: Then it turned to you and charged the laser before it overheated just before killing you.",
          "[AGENT.BURTON]: Yes",
          "[AGENT.LOCKE]: So tell me,",
          "[AGENT.LOCKE]: HOW DID THAT HAPPEN",
          "[AGENT.BURTON]: I did everything correctly.",
          "[AGENT.BURTON]: It just did it on its own.",
          "[AGENT.LOCKE]: It just did it on its own? So you're saying it's alive now?",
          "[AGENT.BURTON]: No. I'm just saying",
          "[AGENT.BURTON]: it did it on its own.",
          "[AGENT.BURTON]: Plus, there is unnecessary Artificial Intelligence in the hardware.",
          "[AGENT.LOCKE]: Well it's probably just for finding targets and knowing who is from Prismagon not to shoot.",
          "[AGENT.BURTON]: I managed to get some of the hardware onto a USB stick, which I then plugged into my PC.",
          "[AGENT.LOCKE]: OK?",
          "[AGENT.BURTON]: It is sending data to an outside source",
          "[AGENT.BURTON]: and receiving data, instructions, code,",
          "[AGENT.BURTON]: the turret is being controlled by voidwell.",
          "[AGENT.LOCKE]: What?",
          "[AGENT.BURTON]: The turret is even sending the camera data to voidwell, they are looking through the turrets. And of course, because the turret uses identification to see if it should shoot or not,",
          "[AGENT.BURTON]: it also has the names and other information of all the agents the turret camera has seen.",
          "[AGENT.LOCKE]: Okay well",
          "[SYSTEM]: Terminal shutdown..."
        ];

        let index = 0;
        function nextLine() {
          if (index < loreEntries.length) {
            const line = document.createElement("div");
            line.textContent = loreEntries[index];
            logOutput.appendChild(line);
            logOutput.scrollTop = logOutput.scrollHeight;
            const hr = document.createElement("hr");
            logOutput.appendChild(hr);
            index++;
            setTimeout(nextLine, 200);
          }
        }
        nextLine();
      }, 3000);
    }

    function closeLogs() {
      document.getElementById("logOutput").style.display = "none";
    }

    function showCamVideo() {
      const videoContainer = document.getElementById("videoOutput");
      videoContainer.style.display = "block";
      const video = document.getElementById("securityCamVideo");
      video.currentTime = 0;
      video.play();
    }

    function closeVideo() {
      const video = document.getElementById("securityCamVideo");
      video.pause();
      document.getElementById("videoOutput").style.display = "none";
    }
  </script>
</body>
</html>

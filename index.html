<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Prismagon Internal Network</title>
  <style>
    body {
      background-color: #000;
      color: #33FF33;
      font-family: 'Courier New', Courier, monospace;
      padding: 20px;
      text-align: center;
      overflow: hidden;
      position: relative;
    }

    .terminal {
      max-width: 600px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }

    input, button {
      background: none;
      border: 1px solid #33FF33;
      color: #33FF33;
      font-family: inherit;
      padding: 5px;
      margin-top: 10px;
      width: 100%;
    }

    button:hover {
      background-color: #003300;
      cursor: pointer;
    }

    .logo {
      font-weight: bold;
      font-size: 18px;
      margin-bottom: 20px;
    }

    .output {
      margin-top: 20px;
      min-height: 60px;
    }

    #introLogo {
      width: 300px;
      margin: 20vh auto 0;
      display: block;
      position: relative;
      z-index: 1;
    }

    .crt-overlay::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background-image: repeating-linear-gradient(
        to bottom,
        rgba(0, 255, 0, 0.05),
        rgba(0, 255, 0, 0.05) 1px,
        transparent 1px,
        transparent 2px
      );
      z-index: 2;
    }

    #loreTerminal .output {
      max-height: 400px;
      overflow-y: auto;
      text-align: left;
      padding-right: 10px;
      border: 1px solid #33FF33;
      padding: 10px;
    }

    #loreTerminal .output hr {
      border: none;
      border-top: 1px solid #33FF33;
      margin: 5px 0;
    }

    #archivedMessages {
      margin-top: 20px;
      border: 1px solid #33FF33;
      padding: 10px;
      position: relative;
    }

    #closeArchived {
      position: absolute;
      top: 5px;
      right: 10px;
      color: #33FF33;
      cursor: pointer;
    }

    #closeArchived:hover {
      color: red;
    }
  </style>
</head>
<body class="crt-overlay">

  <img id="introLogo" src="prismagon-logo.png" alt="Prismagon Logo">

  <!-- LOGIN TERMINAL -->
  <div id="mainTerminal" style="display: none;">
    <div class="terminal">
      <div class="logo">[PRISMAGON INC. SECURE LOGIN]</div>
      <div class="output" id="output"></div>
      <input type="text" id="username" placeholder="Username">
      <input type="password" id="password" placeholder="Password">
      <button onclick="login()">LOGIN</button>
      <div class="output" id="response"></div>
    </div>
  </div>

  <!-- LORE TERMINAL -->
  <div id="loreTerminal" style="display: none;">
    <div class="terminal">
      <div class="output" id="loreOutput"></div>
      <input type="text" id="commandInput" placeholder="Enter command..." style="width: 100%; margin-top: 10px;">
      <div class="output" id="commandResponse"></div>
      <div id="archivedMessages" style="display: none;">
        <div id="closeArchived" onclick="closeArchived()">[X]</div>
        <div id="archivedContent"></div>
      </div>
    </div>
  </div>

  <script>
    // Glitch flicker intro
    const logo = document.getElementById("introLogo");
    const terminal = document.getElementById("mainTerminal");

    let flickerCount = 0;
    function glitchFlicker() {
      if (flickerCount >= 10 + Math.floor(Math.random() * 10)) {
        logo.style.display = "none";
        terminal.style.display = "block";
        startTyping();
        return;
      }
      logo.style.opacity = Math.random() < 0.4 ? "0.1" : "1";
      flickerCount++;
      setTimeout(glitchFlicker, 100 + Math.random() * 150);
    }
    glitchFlicker();

    // Typing effect
    function startTyping() {
      const lines = [
        "Welcome to the Prismagon Internal Network.",
        "Please enter your credentials to continue."
      ];
      const output = document.getElementById("output");
      let lineIndex = 0;
      let charIndex = 0;

      function typeLine() {
        if (lineIndex < lines.length) {
          if (charIndex < lines[lineIndex].length) {
            output.innerHTML += lines[lineIndex].charAt(charIndex);
            charIndex++;
            setTimeout(typeLine, 60 + Math.random() * 50);
          } else {
            output.innerHTML += "<br>";
            lineIndex++;
            charIndex = 0;
            setTimeout(typeLine, 600);
          }
        }
      }

      typeLine();
    }

    // Login logic
    function login() {
      const username = document.getElementById('username').value.trim().toLowerCase();
      const password = document.getElementById('password').value.trim();
      const response = document.getElementById('response');

      if (username === "melanie.burton@prismagoninc.com" && password === "K12SaltedWounds") {
        response.innerHTML = "<br>Access Granted. Welcome back, Agent Burton.<br>Loading internal logs...";
        setTimeout(() => {
          document.getElementById("mainTerminal").style.display = "none";
          document.getElementById("loreTerminal").style.display = "block";
          showLore();
        }, 2000);
      } else {
        response.innerHTML = "<br>ACCESS DENIED. INCIDENT LOGGED.";
      }
    }

    // Lore entries
    const loreEntries = [
      "[SYSTEM]: Initializing internal network...",
      "[ADMIN]: Welcome, Agent Burton.",
      "[AGENT.LOCKE]: Why did automated turret YOU were working on start malfuncioning and shooting OUR agent team?",
      "[AGENT.BURTON]: I finished all the wiring, tested it using the set images. It passed the test, then I stood in front of it and it didn't shoot. So I went back out of its view",
      "[AGENT.BURTON]: then agent Parker came in then the turret seemed normal, just looking around but then just started shooting at him.",
      "[AGENT.LOCKE]: Then turned to you and charged the laser before it overheated just before killing you.",
      "[AGENT.BURTON]: Yes",
      "[AGENT.LOCKE]: So tell me,",
      "[AGENT.LOCKE]: HOW DID THAT HAPPEN",
      "[AGENT.BURTON]: I did everything correctly.",
      "[AGENT.BURTON]: It just did it on its own.",
      "[AGENT.LOCKE]: It just did it on its own? so you're saying its alive now?",
      "[AGENT.BURTON]: No. I'm just saying",
      "[AGENT.BURTON]: it did it on its own.",
      "[AGENT.BURTON]: Plus, there is unnecessary Artificial Intelligence in the hardware.",
      "[AGENT.LOCKE]: Well it's probably just for finding targets and knowing who is from prismagon to not shoot.",
      "[AGENT.BURTON]: I managed to get some of the hardware into a USB stick then I plugged it into my PC.",
      "[AGENT.LOCKE]: OK?",
      "[AGENT.BURTON]: It is sending data to an outside source",
      "[AGENT.BURTON]: and recieving data, instructions, code,",
      "[AGENT.BURTON]: the turret is being controlled by voidwell.",
      "[AGENT.LOCKE]: What?",
      "[AGENT.BURTON]: The turret is even sending the camera data to voidwell, they are looking through the turrets. And of course, because the turret uses identification to see if it should shoot or not,",
      "[AGENT.BURTON]: it also has the names and other information of all the agents the turret camera has seen.",
      "[AGENT.LOCKE]: Okay well",
      "[SYSTEM]: Terminal shutdown..."
    ];

    function showLore() {
      const loreOutput = document.getElementById("loreOutput");
      let index = 0;

      function nextLine() {
        if (index < loreEntries.length) {
          const line = document.createElement("div");
          line.textContent = loreEntries[index];
          loreOutput.appendChild(line);
          loreOutput.appendChild(document.createElement("hr"));
          loreOutput.scrollTop = loreOutput.scrollHeight;
          index++;
          setTimeout(nextLine, 1000 + Math.random() * 500);
        }
      }

      nextLine();
    }

    // Command handler
    const commandInput = document.getElementById("commandInput");
    const commandResponse = document.getElementById("commandResponse");

    commandInput.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        const cmd = commandInput.value.trim().toLowerCase();
        commandInput.value = "";

        if (cmd === "textlogs") {
          loadArchivedMessages();
        } else {
          commandResponse.innerHTML = "<br>Unknown command.";
        }
      }
    });

    function loadArchivedMessages() {
      let dots = 1;
      let timer = 0;
      commandResponse.textContent = "loading archived messages.";

      const interval = setInterval(() => {
        dots = dots % 3 + 1;
        commandResponse.textContent = "loading archived messages." + ".".repeat(dots);
        timer += 500;
        if (timer >= 5000) {
          clearInterval(interval);
          commandResponse.textContent = "";
          showArchived();
        }
      }, 500);
    }

    function showArchived() {
      const archived = document.getElementById("archivedMessages");
      const content = document.getElementById("archivedContent");
      archived.style.display = "block";
      content.innerHTML = `
        <strong>[ARCHIVED MESSAGES]</strong><br>
        - Agent Burton message archive opened.<br>
        - Contents redacted for security.<br>
        - Logs may be incomplete.<br>
        ...
      `;
    }

    function closeArchived() {
      document.getElementById("archivedMessages").style.display = "none";
    }
  </script>
</body>
</html>
